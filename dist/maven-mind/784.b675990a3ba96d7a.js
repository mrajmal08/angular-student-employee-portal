"use strict";(self.webpackChunkmaven_mind=self.webpackChunkmaven_mind||[]).push([[784],{3784:(B,g,l)=>{l.r(g),l.d(g,{CoursesModule:()=>L});var m=l(6895),p=l(8616),a=l(433),e=l(1571),f=l(9228);function b(o,s){1&o&&(e.TgZ(0,"sup"),e._uU(1,"*"),e.qZA())}function C(o,s){1&o&&(e.TgZ(0,"small",18),e._uU(1,"Please enter your name!"),e.qZA())}function _(o,s){1&o&&(e.TgZ(0,"small",18),e._uU(1,"Maximum characters should be 25!"),e.qZA())}let h=(()=>{class o{constructor(t,n,i){this.fb=t,this.location=n,this.apiClient=i,this.displayValidation=!0,this.ukInstitutions=[{id:1,name:"University of London"},{id:2,name:"Oxford University"},{id:3,name:"Imperial College London"}],this.outsideUkInstitutions=[{id:1,name:"Harvard University"},{id:2,name:"Stanford University"},{id:3,name:"University of Sydney"}],this.selectedUkInstitutions=[],this.selectedOutsideUkInstitutions=[]}ngOnInit(){this.agentForm=this.fb.group({name:["",a.kI.required]}),this.dataForEdit=history.state,console.log("data",this.dataForEdit),this.dataForEdit.row&&this.agentForm.patchValue({name:this.dataForEdit.row.name})}onFileChange(t,n){t.target.files.length>0&&this.agentForm.patchValue({[n]:t.target.files[0]})}onSubmit(){this.agentForm.valid?(console.log("Form Submitted:",this.agentForm.value),this.dataForEdit.row?this.apiClient.post(`course/update?id=${this.dataForEdit.row.id}&name=${this.agentForm.controls.name.value}`).subscribe(t=>{t.status&&this.location.back()}):this.apiClient.post(`course/insert?name=${this.agentForm.controls.name.value}`).subscribe(t=>{t.status&&this.location.back()})):console.log("Form is invalid")}closeForm(){console.log("Close the form"),this.location.back()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(m.Ye),e.Y36(f.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-courses-form"]],decls:24,vars:6,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"position-absolute",2,"top","2px","right","10px","cursor","pointer","color","white"],[1,"fa","fa-times",3,"click"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-md-4"],[1,"form-group"],["for","firstName"],[4,"ngIf"],["type","text","name","name","formControlName","name","alphaOnly","",1,"form-control"],["class","form-text text-muted danger",4,"ngIf"],[1,"form-buttons","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-text","text-muted","danger"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span",4)(7,"i",5),e.NdJ("click",function(){return n.closeForm()}),e.qZA()()(),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),e._uU(14,"Name:"),e.YNc(15,b,2,0,"sup",12),e.qZA(),e._UZ(16,"input",13),e.YNc(17,C,2,0,"small",14),e.YNc(18,_,2,0,"small",14),e.qZA()()()(),e.TgZ(19,"div",15)(20,"button",16),e.NdJ("click",function(){return n.onSubmit()}),e._uU(21,"Submit"),e.qZA(),e.TgZ(22,"button",17),e.NdJ("click",function(){return n.closeForm()}),e._uU(23,"Cancel"),e.qZA()()()()()()),2&t){let i,r;e.xp6(5),e.hij("",n.dataForEdit.row?"Edit":"Add"," Course"),e.xp6(4),e.Q6J("formGroup",n.agentForm),e.xp6(6),e.Q6J("ngIf",n.displayValidation),e.xp6(2),e.Q6J("ngIf",(null==(i=n.agentForm.get("name"))||null==i.errors?null:i.errors.required)&&((null==(i=n.agentForm.get("name"))?null:i.dirty)||(null==(i=n.agentForm.get("name"))?null:i.touched))),e.xp6(1),e.Q6J("ngIf",(null==(r=n.agentForm.get("name"))||null==r.errors?null:r.errors.maxlength)&&(null==(r=n.agentForm.get("name"))?null:r.dirty)),e.xp6(2),e.Q6J("disabled",!n.agentForm.valid)}},dependencies:[m.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.radio-group[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}ng-select[_ngcontent-%COMP%]{width:100%}"]}),o})();var d=l(7340);function x(o){return new Date(o).toLocaleDateString("en-GB").replace(/\//g,"-")}var y=l(8975),A=l(7185),v=l(2086),u=l(9585);function F(o,s){1&o&&e._UZ(0,"i",28)}function T(o,s){1&o&&e._UZ(0,"i",29)}function Z(o,s){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.qZA()),2&o){const t=s.$implicit,n=e.oxw();e.Q6J("value",t)("selected",t===n.page.perPage),e.xp6(1),e.hij("",t," ")}}function k(o,s){if(1&o&&(e.TgZ(0,"div",32),e._uU(1),e.qZA()),2&o){const t=s.column;e.xp6(1),e.Oqu(t.name)}}function U(o,s){if(1&o&&(e.TgZ(0,"div",33),e._uU(1),e.qZA()),2&o){const t=s.value;e.xp6(1),e.Oqu(t)}}function w(o,s){if(1&o&&(e.TgZ(0,"ngx-datatable-column",31),e.YNc(1,k,2,1,"ng-template",26),e.YNc(2,U,2,1,"ng-template",27),e.qZA()),2&o){const t=s.$implicit;e.Q6J("name",t.name)("prop",t.prop)("sortable",!1)}}function N(o,s){1&o&&(e.TgZ(0,"div",34),e._uU(1,"Action"),e.qZA())}function P(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",35)(1,"button",36),e.NdJ("click",function(){const r=e.CHM(t).row,c=e.oxw();return e.KtG(c.editAgent(r))}),e._UZ(2,"i",37),e.qZA(),e.TgZ(3,"button",38),e.NdJ("click",function(){const r=e.CHM(t).row,c=e.oxw();return e.KtG(c.deleteAgent(r))}),e._UZ(4,"i",39),e.qZA()()}}const J=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(t,n,i,r,c){this.fb=t,this.router=n,this.apiClient=i,this.toastr=r,this.dialog=c,this.page={perPage:25,page:1,total:100},this.perPageOptions=[10,25,50,100],this.isCollapsed=!0,this.columns=[{name:"Course ID",prop:"id"},{name:"Course Name",prop:"name"},{name:"Created At",prop:"created_at"},{name:"Created By",prop:"created_by"},{name:"Updated By",prop:"updated_by"}],this.rows=[{id:1,name:"John Doe",company:"ABC Ltd.",mobile:"+44 7890 123456",registerationNumber:"VAT123456789",UkAddress:"123 Baker Street, London, UK",NonUkAddress:"456 Elm Street, New York, USA",email:"john.doe@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-10",updatedBy:"Admin 2024-01-15"},{id:2,name:"Jane Smith",company:"XYZ Corp.",mobile:"+44 7523 987654",registerationNumber:"VAT987654321",UkAddress:"78 High Street, Manchester, UK",NonUkAddress:"789 Pine Avenue, Toronto, Canada",email:"jane.smith@example.com",complianceCheck:"Pending",restrictedCountries:"Iran, North Korea",createdBy:"Admin 2024-01-12",updatedBy:"Admin 2024-01-18"},{id:3,name:"Michael Johnson",company:"Global Solutions",mobile:"+44 7012 345678",registerationNumber:"VAT654321789",UkAddress:"56 King\u2019s Road, Edinburgh, UK",NonUkAddress:"123 Ocean Drive, Sydney, Australia",email:"michael.johnson@example.com",complianceCheck:"Failed",restrictedCountries:"Russia, Syria",createdBy:"Admin 2024-01-14",updatedBy:"Admin 2024-01-20"},{id:4,name:"Emma Brown",company:"Secure Trade Ltd.",mobile:"+44 7412 567890",registerationNumber:"VAT111222333",UkAddress:"89 Tower Bridge Road, London, UK",NonUkAddress:"555 Bay Street, Dubai, UAE",email:"emma.brown@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-16",updatedBy:"Admin 2024-01-22"}],this.buildForm()}ngOnInit(){this.filterForm.controls.name.valueChanges.subscribe(t=>{this.getCourses(t)}),this.getCourses()}getCourses(t=""){this.apiClient.get("courses",{pagination:this.page.page,per_page:this.page.perPage,name:t||""}).subscribe(n=>{this.rows=n.result.data.map(i=>({...i,created_at:x(i.created_at)}))})}buildForm(){this.filterForm=this.fb.group({name:[""]})}setPage(t){this.page.page=t.offset+1,this.getCourses()}updatePerPage(t){this.page.perPage=t.target.value,this.getCourses()}getTotalPages(){return Math.ceil(this.page.total/this.page.perPage)}onSelectFilters(){}resetForm(){}onResetFilters(){}onAgentNameClick(t){this.router.navigateByUrl(`/courses/${t}`)}addNewAgent(){this.router.navigateByUrl("/courses/add")}editAgent(t){console.log("Edit Agent:",t),this.router.navigateByUrl(`/courses/edit/${t.id}`,{state:{row:t}})}deleteAgent(t){confirm("Are you sure you want to delete this course?")&&this.deleteCourse(t.id)}showAlert(t,n){this.dialog.open(y.$,{width:"400px",panelClass:"custom-dialog-container",position:{top:"50%",left:"50%"},data:{message:n,type:t}}).afterClosed().subscribe(r=>{})}deleteCourse(t){this.apiClient.get(`course/delete/${t}`).toPromise().then(n=>{this.toastr.success("Course Deleted successfully!","Success"),this.getCourses()}).catch(n=>{this.showAlert("error",n.error.message)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(a.qu),e.Y36(p.F0),e.Y36(f.O),e.Y36(A._W),e.Y36(v.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-courses-list"]],decls:37,vars:23,consts:[[1,"d-flex","mt-3","mb-3","justify-content-end"],["type","button",1,"btn","btn-secondary",3,"click"],["autocomplete","off","novalidate","",1,"form","w-100",2,"margin","20px 0px",3,"formGroup","ngSubmit"],[1,"form-content","search-filter-block","position-relative"],[1,"sub-title","search-agent-title"],["aria-controls","collapseBasic","type","button",1,"btn","plus-btn","position-absolute",2,"max-width","42px","top","42px","right","20px","min-width","unset","background-color","#05a853","border","#05a853",3,"click"],["class","bi bi-plus",4,"ngIf"],["class","bi bi-dash",4,"ngIf"],[1,"row"],[1,"field-block","w-100"],[1,"col-12",2,"color","#808382"],[1,"row",2,"padding-right","100px"],[1,"col-12","col-sm-6","col-md-3"],[1,"form-group"],["for","agent_id"],["type","text","id","agent_id","formControlName","name",1,"form-control"],[1,"d-flex","justify-content-center","mt-3"],["type","submit",1,"btn","btn-primary","mx-2",2,"background-color","#05a853","border","#05a853"],["type","button",1,"btn","btn-default","mx-2",3,"disabled","click"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["for","perPageSelect",1,"me-2"],["id","perPageSelect",1,"form-select","me-2",2,"width","auto","display","inline-block",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"bootstrap","custom-table",3,"rows","columns","columnMode","headerHeight","footerHeight","rowHeight","scrollbarH","limit","count","offset","externalPaging","page"],[3,"name","prop","sortable",4,"ngFor","ngForOf"],["name","Action",3,"width"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[1,"bi","bi-plus"],[1,"bi","bi-dash"],[3,"value","selected"],[3,"name","prop","sortable"],[1,"mgx-header"],[1,"text-center"],[1,"mgx-header","text-center"],[1,"d-flex","justify-content-center","gap-2"],[1,"btn","btn-sm","btn-primary",2,"min-width","60px","padding","5px 10px",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-danger",2,"min-width","60px","padding","5px 10px",3,"click"],[1,"bi","bi-trash"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return n.addNewAgent()}),e._uU(2,"+ Add new course"),e.qZA()(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return n.onSelectFilters()}),e.TgZ(4,"div",3)(5,"strong",4),e._uU(6,"Search Course"),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.isCollapsed=!n.isCollapsed}),e.YNc(8,F,1,0,"i",6),e.YNc(9,T,1,0,"i",7),e.qZA(),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"label",14),e._uU(17,"Name"),e.qZA(),e._UZ(18,"input",15),e.qZA()()(),e.TgZ(19,"div",16)(20,"button",17),e._uU(21,"Filter"),e.qZA(),e.TgZ(22,"button",18),e.NdJ("click",function(){return n.onResetFilters()}),e._uU(23,"Reset"),e.qZA()()()()()()(),e.TgZ(24,"div",19)(25,"div")(26,"label",20),e._uU(27,"Show"),e.qZA(),e.TgZ(28,"select",21),e.NdJ("change",function(r){return n.updatePerPage(r)}),e.YNc(29,Z,2,3,"option",22),e.qZA(),e.TgZ(30,"label",20),e._uU(31,"entries"),e.qZA()()(),e.TgZ(32,"ngx-datatable",23),e.NdJ("page",function(r){return n.setPage(r)}),e.YNc(33,w,3,3,"ngx-datatable-column",24),e.TgZ(34,"ngx-datatable-column",25),e.YNc(35,N,2,0,"ng-template",26),e.YNc(36,P,5,0,"ng-template",27),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.filterForm),e.xp6(4),e.ekj("btn-dark",!n.isCollapsed)("btn-primary",n.isCollapsed),e.uIk("aria-expanded",!n.isCollapsed),e.xp6(1),e.Q6J("ngIf",n.isCollapsed),e.xp6(1),e.Q6J("ngIf",!n.isCollapsed),e.xp6(13),e.Q6J("disabled",!0),e.xp6(7),e.Q6J("ngForOf",n.perPageOptions),e.xp6(3),e.Q6J("rows",n.rows)("columns",n.columns)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("scrollbarH",!0)("limit",n.page.perPage)("count",n.page.total)("offset",n.page.page-1)("externalPaging",!0),e.xp6(1),e.Q6J("ngForOf",n.columns),e.xp6(1),e.Q6J("width",150))},dependencies:[m.sg,m.O5,u.nE,u.UC,u.tk,u.vq,a._Y,a.YN,a.Kr,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".search-agent-title[_ngcontent-%COMP%]{top:0;left:73px;transform:translate(-50%,-50%);background:white;font-size:16px;font:400 1rem/19px Poppins,Arial,Helvetica,sans-serif;text-transform:capitalize;background:#fff;position:absolute;padding:0 15px;color:#00b5e9}.plus-btn[_ngcontent-%COMP%]{top:10px;right:15px}.form-content[_ngcontent-%COMP%]{border:1px solid #ddd;padding:20px;border-radius:5px;position:relative}.mat-date-picker-custom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}button.btn-primary[_ngcontent-%COMP%], button.btn-default[_ngcontent-%COMP%]{min-width:110px}.clickable-text[_ngcontent-%COMP%]{color:#2e7d32;cursor:pointer;text-align:center}"],data:{animation:[(0,d.X$)("collapseAnimation",[(0,d.SB)("collapsed",(0,d.oB)({height:"0",overflow:"hidden",opacity:"0",margin:"0"})),(0,d.SB)("expanded",(0,d.oB)({height:"*",opacity:"1",margin:"*"})),(0,d.eR)("collapsed <=> expanded",[(0,d.jt)("300ms ease-out")])])]}}),o})()},{path:"add",component:h},{path:"edit/:id",component:h}];let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(J),p.Bz]}),o})();var S=l(8816),M=l(8796);let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,O,u.xD,a.UX,M.A0,S.f.forRoot()]}),o})()}}]);