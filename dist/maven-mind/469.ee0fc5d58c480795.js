"use strict";(self.webpackChunkmaven_mind=self.webpackChunkmaven_mind||[]).push([[469],{6469:(S,g,l)=>{l.r(g),l.d(g,{CoursesModule:()=>M});var c=l(6895),p=l(8616),s=l(433),e=l(1571),f=l(9228);function C(n,i){1&n&&(e.TgZ(0,"sup"),e._uU(1,"*"),e.qZA())}function b(n,i){1&n&&(e.TgZ(0,"small",18),e._uU(1,"Please enter your name!"),e.qZA())}function _(n,i){1&n&&(e.TgZ(0,"small",18),e._uU(1,"Maximum characters should be 25!"),e.qZA())}let h=(()=>{class n{constructor(t,o,r){this.fb=t,this.location=o,this.apiClient=r,this.displayValidation=!0,this.ukInstitutions=[{id:1,name:"University of London"},{id:2,name:"Oxford University"},{id:3,name:"Imperial College London"}],this.outsideUkInstitutions=[{id:1,name:"Harvard University"},{id:2,name:"Stanford University"},{id:3,name:"University of Sydney"}],this.selectedUkInstitutions=[],this.selectedOutsideUkInstitutions=[]}ngOnInit(){this.agentForm=this.fb.group({name:["",s.kI.required]}),this.dataForEdit=history.state,console.log("data",this.dataForEdit),this.dataForEdit.row&&this.agentForm.patchValue({name:this.dataForEdit.row.name})}onFileChange(t,o){t.target.files.length>0&&this.agentForm.patchValue({[o]:t.target.files[0]})}onSubmit(){this.agentForm.valid?(console.log("Form Submitted:",this.agentForm.value),this.dataForEdit.row?this.apiClient.post(`course/update?id=${this.dataForEdit.row.id}&name=${this.agentForm.controls.name.value}`).subscribe(t=>{t.status&&this.location.back()}):this.apiClient.post(`course/insert?name=${this.agentForm.controls.name.value}`).subscribe(t=>{t.status&&this.location.back()})):console.log("Form is invalid")}closeForm(){console.log("Close the form"),this.location.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(c.Ye),e.Y36(f.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-courses-form"]],decls:24,vars:6,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"position-absolute",2,"top","2px","right","10px","cursor","pointer","color","white"],[1,"fa","fa-times",3,"click"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-md-4"],[1,"form-group"],["for","firstName"],[4,"ngIf"],["type","text","name","name","formControlName","name","alphaOnly","",1,"form-control"],["class","form-text text-muted danger",4,"ngIf"],[1,"form-buttons","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-text","text-muted","danger"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),e._uU(5),e.qZA(),e.TgZ(6,"span",4)(7,"i",5),e.NdJ("click",function(){return o.closeForm()}),e.qZA()()(),e.TgZ(8,"div",6)(9,"form",7),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),e._uU(14,"Name:"),e.YNc(15,C,2,0,"sup",12),e.qZA(),e._UZ(16,"input",13),e.YNc(17,b,2,0,"small",14),e.YNc(18,_,2,0,"small",14),e.qZA()()()(),e.TgZ(19,"div",15)(20,"button",16),e.NdJ("click",function(){return o.onSubmit()}),e._uU(21,"Submit"),e.qZA(),e.TgZ(22,"button",17),e.NdJ("click",function(){return o.closeForm()}),e._uU(23,"Cancel"),e.qZA()()()()()()),2&t){let r,a;e.xp6(5),e.hij("",o.dataForEdit.row?"Edit":"Add"," Course"),e.xp6(4),e.Q6J("formGroup",o.agentForm),e.xp6(6),e.Q6J("ngIf",o.displayValidation),e.xp6(2),e.Q6J("ngIf",(null==(r=o.agentForm.get("name"))||null==r.errors?null:r.errors.required)&&((null==(r=o.agentForm.get("name"))?null:r.dirty)||(null==(r=o.agentForm.get("name"))?null:r.touched))),e.xp6(1),e.Q6J("ngIf",(null==(a=o.agentForm.get("name"))||null==a.errors?null:a.errors.maxlength)&&(null==(a=o.agentForm.get("name"))?null:a.dirty)),e.xp6(2),e.Q6J("disabled",!o.agentForm.valid)}},dependencies:[c.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.radio-group[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}ng-select[_ngcontent-%COMP%]{width:100%}"]}),n})();var m=l(7340),x=l(6899),v=l(8975),y=l(7185),A=l(2086),d=l(9585);function F(n,i){if(1&n&&(e.TgZ(0,"option",25),e._uU(1),e.qZA()),2&n){const t=i.$implicit,o=e.oxw();e.Q6J("value",t)("selected",t===o.page.perPage),e.xp6(1),e.hij("",t," ")}}function T(n,i){if(1&n&&(e.TgZ(0,"div",27),e._uU(1),e.qZA()),2&n){const t=i.column;e.xp6(1),e.Oqu(t.name)}}function Z(n,i){if(1&n&&(e.TgZ(0,"div",28),e._uU(1),e.qZA()),2&n){const t=i.value;e.xp6(1),e.Oqu(t)}}function k(n,i){if(1&n&&(e.TgZ(0,"ngx-datatable-column",26),e.YNc(1,T,2,1,"ng-template",23),e.YNc(2,Z,2,1,"ng-template",24),e.qZA()),2&n){const t=i.$implicit;e.Q6J("name",t.name)("prop",t.prop)("sortable",!1)}}function U(n,i){1&n&&(e.TgZ(0,"div",29),e._uU(1,"Action"),e.qZA())}function N(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"i",31),e.NdJ("click",function(){const a=e.CHM(t).row,u=e.oxw();return e.KtG(u.editAgent(a))}),e.qZA(),e.TgZ(2,"i",32),e.NdJ("click",function(){const a=e.CHM(t).row,u=e.oxw();return e.KtG(u.deleteAgent(a))}),e.qZA()()}}const P=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class n{constructor(t,o,r,a,u){this.fb=t,this.router=o,this.apiClient=r,this.toastr=a,this.dialog=u,this.page={perPage:10,page:1,total:0},this.perPageOptions=[10,25,50,100],this.isCollapsed=!0,this.columns=[{name:"Course ID",prop:"id"},{name:"Course Name",prop:"name"},{name:"Created At",prop:"created_at"},{name:"Created By",prop:"created_by"},{name:"Updated By",prop:"updated_by"}],this.rows=[{id:1,name:"John Doe",company:"ABC Ltd.",mobile:"+44 7890 123456",registerationNumber:"VAT123456789",UkAddress:"123 Baker Street, London, UK",NonUkAddress:"456 Elm Street, New York, USA",email:"john.doe@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-10",updatedBy:"Admin 2024-01-15"},{id:2,name:"Jane Smith",company:"XYZ Corp.",mobile:"+44 7523 987654",registerationNumber:"VAT987654321",UkAddress:"78 High Street, Manchester, UK",NonUkAddress:"789 Pine Avenue, Toronto, Canada",email:"jane.smith@example.com",complianceCheck:"Pending",restrictedCountries:"Iran, North Korea",createdBy:"Admin 2024-01-12",updatedBy:"Admin 2024-01-18"},{id:3,name:"Michael Johnson",company:"Global Solutions",mobile:"+44 7012 345678",registerationNumber:"VAT654321789",UkAddress:"56 King\u2019s Road, Edinburgh, UK",NonUkAddress:"123 Ocean Drive, Sydney, Australia",email:"michael.johnson@example.com",complianceCheck:"Failed",restrictedCountries:"Russia, Syria",createdBy:"Admin 2024-01-14",updatedBy:"Admin 2024-01-20"},{id:4,name:"Emma Brown",company:"Secure Trade Ltd.",mobile:"+44 7412 567890",registerationNumber:"VAT111222333",UkAddress:"89 Tower Bridge Road, London, UK",NonUkAddress:"555 Bay Street, Dubai, UAE",email:"emma.brown@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-16",updatedBy:"Admin 2024-01-22"}],this.buildForm()}ngOnInit(){this.filterForm.controls.name.valueChanges.subscribe(t=>{""===t&&this.getCourses()}),this.getCourses()}getCourses(t=""){this.apiClient.get("courses",{pagination:1,page:this.page.page,per_page:this.page.perPage,name:t||""}).subscribe(o=>{this.page.total=o.result.total,this.rows=o.result.data.map(r=>({...r,created_at:(0,x.b)(r.created_at)}))})}buildForm(){this.filterForm=this.fb.group({name:[""]})}setPage(t){this.page.page=t.offset+1,this.getCourses()}updatePerPage(t){this.page.perPage=t.target.value,this.getCourses()}getTotalPages(){return Math.ceil(this.page.total/this.page.perPage)}onSelectFilters(){}resetForm(){}onResetFilters(){this.filterForm.controls.name.setValue(null),this.getCourses()}onApplyFilters(){this.getCourses(this.filterForm.controls.name.value)}onAgentNameClick(t){this.router.navigateByUrl(`/courses/${t}`)}addNewAgent(){this.router.navigateByUrl("/courses/add")}editAgent(t){console.log("Edit Agent:",t),this.router.navigateByUrl(`/courses/edit/${t.id}`,{state:{row:t}})}deleteAgent(t){confirm("Are you sure you want to delete this course?")&&this.deleteCourse(t.id)}showAlert(t,o){this.dialog.open(v.$,{width:"400px",panelClass:"custom-dialog-container",position:{top:"50%",left:"50%"},data:{message:o,type:t}}).afterClosed().subscribe(a=>{})}deleteCourse(t){this.apiClient.get(`course/delete/${t}`).toPromise().then(o=>{this.toastr.success("Course Deleted successfully!","Success"),this.getCourses()}).catch(o=>{this.showAlert("error",o.error.message)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(p.F0),e.Y36(f.O),e.Y36(y._W),e.Y36(A.uw))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-courses-list"]],decls:34,vars:17,consts:[[1,"d-flex","mt-3","mb-3","justify-content-end"],["type","button",1,"btn","btn-secondary",3,"click"],["autocomplete","off","novalidate","",1,"form","w-100",2,"margin","20px 0px",3,"formGroup","ngSubmit"],[1,"form-content","search-filter-block","position-relative"],[1,"sub-title","search-agent-title"],[1,"position-absolute","d-flex",2,"top","42px","right","20px"],["type","submit",1,"btn","btn-primary","mx-1",2,"background-color","#05a853","border","#05a853",3,"disabled","click"],["type","button",1,"btn","btn-default","mx-1",3,"disabled","click"],[1,"row"],[1,"field-block","w-100"],[1,"col-12",2,"color","#808382"],[1,"row",2,"padding-right","100px"],[1,"col-12","col-sm-6","col-md-3"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["for","perPageSelect",1,"me-2"],["id","perPageSelect",1,"form-select","me-2",2,"width","auto","display","inline-block",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"bootstrap","custom-table",3,"rows","columns","columnMode","headerHeight","footerHeight","rowHeight","scrollbarH","limit","count","offset","externalPaging","page"],[3,"name","prop","sortable",4,"ngFor","ngForOf"],["name","Action",3,"width"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"value","selected"],[3,"name","prop","sortable"],[1,"mgx-header"],[1,"text-center"],[1,"mgx-header","text-center"],[1,"d-flex","justify-content-center","gap-2"],[1,"bi","bi-pencil","fs-5","pt-1",2,"color","green","cursor","pointer",3,"click"],["title","Remove",1,"bi","bi-x","fs-2",2,"color","red","cursor","pointer",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return o.addNewAgent()}),e._uU(2,"+ Add new course"),e.qZA()(),e.TgZ(3,"form",2),e.NdJ("ngSubmit",function(){return o.onApplyFilters()}),e.TgZ(4,"div",3)(5,"strong",4),e._uU(6,"Search Course"),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return o.onApplyFilters()}),e._uU(9," Filter "),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return o.onResetFilters()}),e._uU(11," Reset "),e.qZA()(),e.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"label",14),e._uU(19,"Name"),e.qZA(),e._UZ(20,"input",15),e.qZA()()()()()()()(),e.TgZ(21,"div",16)(22,"div")(23,"label",17),e._uU(24,"Show"),e.qZA(),e.TgZ(25,"select",18),e.NdJ("change",function(a){return o.updatePerPage(a)}),e.YNc(26,F,2,3,"option",19),e.qZA(),e.TgZ(27,"label",17),e._uU(28,"entries"),e.qZA()()(),e.TgZ(29,"ngx-datatable",20),e.NdJ("page",function(a){return o.setPage(a)}),e.YNc(30,k,3,3,"ngx-datatable-column",21),e.TgZ(31,"ngx-datatable-column",22),e.YNc(32,U,2,0,"ng-template",23),e.YNc(33,N,3,0,"ng-template",24),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",o.filterForm),e.xp6(5),e.Q6J("disabled",!o.filterForm.controls.name.value),e.xp6(2),e.Q6J("disabled",!o.filterForm.controls.name.value),e.xp6(16),e.Q6J("ngForOf",o.perPageOptions),e.xp6(3),e.Q6J("rows",o.rows)("columns",o.columns)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("scrollbarH",!0)("limit",o.page.perPage)("count",o.page.total)("offset",o.page.page-1)("externalPaging",!0),e.xp6(1),e.Q6J("ngForOf",o.columns),e.xp6(1),e.Q6J("width",150))},dependencies:[c.sg,d.nE,d.UC,d.tk,d.vq,s._Y,s.YN,s.Kr,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".search-agent-title[_ngcontent-%COMP%]{top:0;left:73px;transform:translate(-50%,-50%);background:white;font-size:16px;font:400 1rem/19px Poppins,Arial,Helvetica,sans-serif;text-transform:capitalize;background:#fff;position:absolute;padding:0 15px;color:#00b5e9}.plus-btn[_ngcontent-%COMP%]{top:10px;right:15px}.form-content[_ngcontent-%COMP%]{border:1px solid #ddd;padding:20px;border-radius:5px;position:relative}.mat-date-picker-custom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}button.btn-primary[_ngcontent-%COMP%], button.btn-default[_ngcontent-%COMP%]{min-width:110px}.clickable-text[_ngcontent-%COMP%]{color:#2e7d32;cursor:pointer;text-align:center}"],data:{animation:[(0,m.X$)("collapseAnimation",[(0,m.SB)("collapsed",(0,m.oB)({height:"0",overflow:"hidden",opacity:"0",margin:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*",opacity:"1",margin:"*"})),(0,m.eR)("collapsed <=> expanded",[(0,m.jt)("300ms ease-out")])])]}}),n})()},{path:"add",component:h},{path:"edit/:id",component:h}];let w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.Bz.forChild(P),p.Bz]}),n})();var J=l(8816),O=l(8796);let M=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,w,d.xD,s.UX,O.A0,J.f.forRoot()]}),n})()}}]);