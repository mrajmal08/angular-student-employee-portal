"use strict";(self.webpackChunkmaven_mind=self.webpackChunkmaven_mind||[]).push([[697],{8697:(Y,f,l)=>{l.r(f),l.d(f,{StatusModule:()=>B});var c=l(6895),g=l(8616),r=l(433),t=l(1571),h=l(9228);function b(o,i){1&o&&(t.TgZ(0,"sup"),t._uU(1,"*"),t.qZA())}function C(o,i){1&o&&(t.TgZ(0,"small",20),t._uU(1,"Please enter your name!"),t.qZA())}function S(o,i){1&o&&(t.TgZ(0,"small",20),t._uU(1,"Maximum characters should be 25!"),t.qZA())}function x(o,i){1&o&&(t.TgZ(0,"sup"),t._uU(1,"*"),t.qZA())}function y(o,i){1&o&&(t.TgZ(0,"small",20),t._uU(1,"Please enter your description!"),t.qZA())}function F(o,i){1&o&&(t.TgZ(0,"small",20),t._uU(1,"Maximum characters should be 25!"),t.qZA())}let _=(()=>{class o{constructor(e,n,a){this.fb=e,this.location=n,this.apiClient=a,this.displayValidation=!0,this.ukInstitutions=[{id:1,name:"University of London"},{id:2,name:"Oxford University"},{id:3,name:"Imperial College London"}],this.outsideUkInstitutions=[{id:1,name:"Harvard University"},{id:2,name:"Stanford University"},{id:3,name:"University of Sydney"}],this.selectedUkInstitutions=[],this.selectedOutsideUkInstitutions=[]}ngOnInit(){this.agentForm=this.fb.group({name:["",r.kI.required],description:["",r.kI.required]}),this.dataForEdit=history.state,console.log("data",this.dataForEdit),this.dataForEdit.row&&this.agentForm.patchValue({name:this.dataForEdit.row.name,description:this.dataForEdit.row.description})}onFileChange(e,n){e.target.files.length>0&&this.agentForm.patchValue({[n]:e.target.files[0]})}onSubmit(){this.agentForm.valid?(console.log("Form Submitted:",this.agentForm.value),this.dataForEdit.row?this.apiClient.post(`status/update?id=${this.dataForEdit.row.id}&name=${this.agentForm.controls.name.value}&description=${this.agentForm.controls.description.value}`).subscribe(e=>{e.status&&this.location.back()}):this.apiClient.post(`status/insert?name=${this.agentForm.controls.name.value}&description=${this.agentForm.controls.description.value}`).subscribe(e=>{e.status&&this.location.back()})):console.log("Form is invalid")}closeForm(){this.location.back()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(c.Ye),t.Y36(h.O))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-status-form"]],decls:32,vars:9,consts:[[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header"],[1,"position-absolute",2,"top","2px","right","10px","cursor","pointer","color","white"],[1,"fa","fa-times",3,"click"],[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-md-4"],[1,"form-group"],["for","firstName"],[4,"ngIf"],["type","text","name","name","formControlName","name","alphaOnly","",1,"form-control"],["class","form-text text-muted danger",4,"ngIf"],["for","lastName"],["type","text","formControlName","description","id","description",1,"form-control"],[1,"form-buttons","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"form-text","text-muted","danger"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span",4)(7,"i",5),t.NdJ("click",function(){return n.closeForm()}),t.qZA()()(),t.TgZ(8,"div",6)(9,"form",7),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(10,"div",8)(11,"div",9)(12,"div",10)(13,"label",11),t._uU(14,"Name:"),t.YNc(15,b,2,0,"sup",12),t.qZA(),t._UZ(16,"input",13),t.YNc(17,C,2,0,"small",14),t.YNc(18,S,2,0,"small",14),t.qZA()(),t.TgZ(19,"div",9)(20,"div",10)(21,"label",15),t._uU(22,"Description:"),t.YNc(23,x,2,0,"sup",12),t.qZA(),t._UZ(24,"input",16),t.YNc(25,y,2,0,"small",14),t.YNc(26,F,2,0,"small",14),t.qZA()()()(),t.TgZ(27,"div",17)(28,"button",18),t.NdJ("click",function(){return n.onSubmit()}),t._uU(29,"Submit"),t.qZA(),t.TgZ(30,"button",19),t.NdJ("click",function(){return n.closeForm()}),t._uU(31,"Cancel"),t.qZA()()()()()()),2&e){let a,s,m,p;t.xp6(5),t.hij("",n.dataForEdit.row?"Edit":"Add"," Status"),t.xp6(4),t.Q6J("formGroup",n.agentForm),t.xp6(6),t.Q6J("ngIf",n.displayValidation),t.xp6(2),t.Q6J("ngIf",(null==(a=n.agentForm.get("name"))||null==a.errors?null:a.errors.required)&&((null==(a=n.agentForm.get("name"))?null:a.dirty)||(null==(a=n.agentForm.get("name"))?null:a.touched))),t.xp6(1),t.Q6J("ngIf",(null==(s=n.agentForm.get("name"))||null==s.errors?null:s.errors.maxlength)&&(null==(s=n.agentForm.get("name"))?null:s.dirty)),t.xp6(5),t.Q6J("ngIf",n.displayValidation),t.xp6(2),t.Q6J("ngIf",(null==(m=n.agentForm.get("description"))||null==m.errors?null:m.errors.required)&&((null==(m=n.agentForm.get("description"))?null:m.dirty)||(null==(m=n.agentForm.get("description"))?null:m.touched))),t.xp6(1),t.Q6J("ngIf",(null==(p=n.agentForm.get("description"))||null==p.errors?null:p.errors.maxlength)&&(null==(p=n.agentForm.get("description"))?null:p.dirty)),t.xp6(2),t.Q6J("disabled",!n.agentForm.valid)}},dependencies:[c.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".form-container[_ngcontent-%COMP%]{max-width:500px;margin:auto;padding:20px;background:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px}.radio-group[_ngcontent-%COMP%]{display:flex;gap:20px;align-items:center}ng-select[_ngcontent-%COMP%]{width:100%}"]}),o})();var u=l(7340),A=l(6899),v=l(8975),T=l(7185),Z=l(2086),d=l(9585);function U(o,i){if(1&o&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("value",e)("selected",e===n.page.perPage),t.xp6(1),t.hij("",e," ")}}function k(o,i){if(1&o&&(t.TgZ(0,"div",27),t._uU(1),t.qZA()),2&o){const e=i.column;t.xp6(1),t.Oqu(e.name)}}function N(o,i){if(1&o&&(t.TgZ(0,"div",28),t._uU(1),t.qZA()),2&o){const e=i.value;t.xp6(1),t.Oqu(e)}}function P(o,i){if(1&o&&(t.TgZ(0,"ngx-datatable-column",26),t.YNc(1,k,2,1,"ng-template",23),t.YNc(2,N,2,1,"ng-template",24),t.qZA()),2&o){const e=i.$implicit;t.Q6J("name",e.name)("prop",e.prop)("sortable",!1)}}function w(o,i){1&o&&(t.TgZ(0,"div",29),t._uU(1,"Action"),t.qZA())}function J(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",30)(1,"i",31),t.NdJ("click",function(){const s=t.CHM(e).row,m=t.oxw();return t.KtG(m.editAgent(s))}),t.qZA(),t.TgZ(2,"i",32),t.NdJ("click",function(){const s=t.CHM(e).row,m=t.oxw();return t.KtG(m.deleteAgent(s))}),t.qZA()()}}const M=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class o{constructor(e,n,a,s,m){this.fb=e,this.router=n,this.apiClient=a,this.toastr=s,this.dialog=m,this.page={perPage:10,page:1,total:0},this.perPageOptions=[10,25,50,100],this.isCollapsed=!0,this.columns=[{name:"Status ID",prop:"id"},{name:"Status Name",prop:"name"},{name:"Status Description",prop:"description"},{name:"Created At",prop:"created_at"},{name:"Created By",prop:"created_by"},{name:"Updated By",prop:"updated_by"}],this.rows=[{id:1,name:"John Doe",company:"ABC Ltd.",mobile:"+44 7890 123456",registerationNumber:"VAT123456789",UkAddress:"123 Baker Street, London, UK",NonUkAddress:"456 Elm Street, New York, USA",email:"john.doe@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-10",updatedBy:"Admin 2024-01-15"},{id:2,name:"Jane Smith",company:"XYZ Corp.",mobile:"+44 7523 987654",registerationNumber:"VAT987654321",UkAddress:"78 High Street, Manchester, UK",NonUkAddress:"789 Pine Avenue, Toronto, Canada",email:"jane.smith@example.com",complianceCheck:"Pending",restrictedCountries:"Iran, North Korea",createdBy:"Admin 2024-01-12",updatedBy:"Admin 2024-01-18"},{id:3,name:"Michael Johnson",company:"Global Solutions",mobile:"+44 7012 345678",registerationNumber:"VAT654321789",UkAddress:"56 King\u2019s Road, Edinburgh, UK",NonUkAddress:"123 Ocean Drive, Sydney, Australia",email:"michael.johnson@example.com",complianceCheck:"Failed",restrictedCountries:"Russia, Syria",createdBy:"Admin 2024-01-14",updatedBy:"Admin 2024-01-20"},{id:4,name:"Emma Brown",company:"Secure Trade Ltd.",mobile:"+44 7412 567890",registerationNumber:"VAT111222333",UkAddress:"89 Tower Bridge Road, London, UK",NonUkAddress:"555 Bay Street, Dubai, UAE",email:"emma.brown@example.com",complianceCheck:"Passed",restrictedCountries:"None",createdBy:"Admin 2024-01-16",updatedBy:"Admin 2024-01-22"}],this.buildForm()}ngOnInit(){this.filterForm.controls.name.valueChanges.subscribe(e=>{""===e&&this.getStatuses(e)}),this.getStatuses()}getStatuses(e=""){this.apiClient.get("status",{pagination:1,page:this.page.page,per_page:this.page.perPage,name:e||""}).subscribe(n=>{this.page.total=n.result.total,this.rows=n.result.data.map(a=>({...a,created_at:(0,A.b)(a.created_at)}))})}buildForm(){this.filterForm=this.fb.group({name:[""],description:[""]})}setPage(e){this.page.page=e.offset+1,this.getStatuses()}updatePerPage(e){this.page.perPage=e.target.value,this.getStatuses()}getTotalPages(){return Math.ceil(this.page.total/this.page.perPage)}onSelectFilters(){}resetForm(){}onResetFilters(){this.filterForm.controls.name.setValue(null),this.getStatuses()}onApplyFilters(){this.getStatuses(this.filterForm.controls.name.value)}onAgentNameClick(e){this.router.navigateByUrl(`/status/${e}`)}addNewAgent(){this.router.navigateByUrl("/status/add")}editAgent(e){console.log("Edit Status:",e),this.router.navigateByUrl(`/status/edit/${e.id}`,{state:{row:e}})}deleteAgent(e){confirm("Are you sure you want to delete this status?")&&this.deleteStatus(e.id)}deleteStatus(e){this.apiClient.get(`status/delete/${e}`).toPromise().then(n=>{this.toastr.success("Status Deleted successfully!","Success"),this.getStatuses()}).catch(n=>{this.showAlert("error",n.error.message)})}showAlert(e,n){this.dialog.open(v.$,{width:"400px",panelClass:"custom-dialog-container",position:{top:"50%",left:"50%"},data:{message:n,type:e}}).afterClosed().subscribe(s=>{})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(g.F0),t.Y36(h.O),t.Y36(T._W),t.Y36(Z.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-status-list"]],decls:34,vars:17,consts:[[1,"d-flex","mt-3","mb-3","justify-content-end"],["type","button",1,"btn","btn-secondary",3,"click"],["autocomplete","off","novalidate","",1,"form","w-100",2,"margin","20px 0px",3,"formGroup","ngSubmit"],[1,"form-content","search-filter-block","position-relative"],[1,"sub-title","search-agent-title"],[1,"position-absolute","d-flex",2,"top","42px","right","20px"],["type","submit",1,"btn","btn-primary","mx-1",2,"background-color","#05a853","border","#05a853",3,"disabled","click"],["type","button",1,"btn","btn-outline-secondary","mx-1",3,"disabled","click"],[1,"row"],[1,"field-block","w-100"],[1,"col-12",2,"color","#808382"],[1,"row",2,"padding-right","100px"],[1,"col-12","col-sm-6","col-md-3"],[1,"form-group"],["for","name"],["type","text","id","name","formControlName","name",1,"form-control"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["for","perPageSelect",1,"me-2"],["id","perPageSelect",1,"form-select","me-2",2,"width","auto","display","inline-block",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[1,"bootstrap","custom-table",3,"rows","columns","columnMode","headerHeight","footerHeight","rowHeight","scrollbarH","limit","count","offset","externalPaging","page"],[3,"name","prop","sortable",4,"ngFor","ngForOf"],["name","Action",3,"width"],["ngx-datatable-header-template",""],["ngx-datatable-cell-template",""],[3,"value","selected"],[3,"name","prop","sortable"],[1,"mgx-header"],[1,"text-center"],[1,"mgx-header","text-center"],[1,"d-flex","justify-content-center","gap-2"],[1,"bi","bi-pencil","fs-5","pt-1",2,"color","green","cursor","pointer",3,"click"],["title","Remove",1,"bi","bi-x","fs-2",2,"color","red","cursor","pointer",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.addNewAgent()}),t._uU(2,"+ Add new status"),t.qZA()(),t.TgZ(3,"form",2),t.NdJ("ngSubmit",function(){return n.onApplyFilters()}),t.TgZ(4,"div",3)(5,"strong",4),t._uU(6,"Search Status"),t.qZA(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return n.onApplyFilters()}),t._uU(9," Filter "),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return n.onResetFilters()}),t._uU(11," Reset "),t.qZA()(),t.TgZ(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"div",12)(17,"div",13)(18,"label",14),t._uU(19,"Name"),t.qZA(),t._UZ(20,"input",15),t.qZA()()()()()()()(),t.TgZ(21,"div",16)(22,"div")(23,"label",17),t._uU(24,"Show"),t.qZA(),t.TgZ(25,"select",18),t.NdJ("change",function(s){return n.updatePerPage(s)}),t.YNc(26,U,2,3,"option",19),t.qZA(),t.TgZ(27,"label",17),t._uU(28,"entries"),t.qZA()()(),t.TgZ(29,"ngx-datatable",20),t.NdJ("page",function(s){return n.setPage(s)}),t.YNc(30,P,3,3,"ngx-datatable-column",21),t.TgZ(31,"ngx-datatable-column",22),t.YNc(32,w,2,0,"ng-template",23),t.YNc(33,J,3,0,"ng-template",24),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("formGroup",n.filterForm),t.xp6(5),t.Q6J("disabled",!n.filterForm.controls.name.value),t.xp6(2),t.Q6J("disabled",!n.filterForm.controls.name.value),t.xp6(16),t.Q6J("ngForOf",n.perPageOptions),t.xp6(3),t.Q6J("rows",n.rows)("columns",n.columns)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("scrollbarH",!0)("limit",n.page.perPage)("count",n.page.total)("offset",n.page.page-1)("externalPaging",!0),t.xp6(1),t.Q6J("ngForOf",n.columns),t.xp6(1),t.Q6J("width",150))},dependencies:[c.sg,d.nE,d.UC,d.tk,d.vq,r._Y,r.YN,r.Kr,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".search-agent-title[_ngcontent-%COMP%]{top:0;left:73px;transform:translate(-50%,-50%);background:white;font-size:16px;font:400 1rem/19px Poppins,Arial,Helvetica,sans-serif;text-transform:capitalize;background:#fff;position:absolute;padding:0 15px;color:#00b5e9}.plus-btn[_ngcontent-%COMP%]{top:10px;right:15px}.form-content[_ngcontent-%COMP%]{border:1px solid #ddd;padding:20px;border-radius:5px;position:relative}.mat-date-picker-custom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}button.btn-primary[_ngcontent-%COMP%], button.btn-default[_ngcontent-%COMP%]{min-width:110px}.clickable-text[_ngcontent-%COMP%]{color:#2e7d32;cursor:pointer;text-align:center}"],data:{animation:[(0,u.X$)("collapseAnimation",[(0,u.SB)("collapsed",(0,u.oB)({height:"0",overflow:"hidden",opacity:"0",margin:"0"})),(0,u.SB)("expanded",(0,u.oB)({height:"*",opacity:"1",margin:"*"})),(0,u.eR)("collapsed <=> expanded",[(0,u.jt)("300ms ease-out")])])]}}),o})()},{path:"add",component:_},{path:"edit/:id",component:_}];let O=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[g.Bz.forChild(M),g.Bz]}),o})();var L=l(8816),q=l(8796);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,O,d.xD,r.UX,q.A0,L.f.forRoot()]}),o})()}}]);